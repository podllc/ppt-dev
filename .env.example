# ============================================================================
# PrescriberPoint Development Environment Configuration
# ============================================================================
# Copy this file to .env and configure your local settings
#
# This file consolidates configuration from multiple repositories:
# - ppt-agentic (primary/highest precedence)
# - microservice-epa
# - microservice-case-management
# - microservice-ai-chatbot
# - job-med-ai-shared
# - And other PPT microservices
# ============================================================================

# ############################################################################
# ENVIRONMENT SELECTION - RND vs PREVIEW
# ############################################################################
# To switch environments, comment/uncomment the appropriate section below.
# RND = Research & Development (testing, staging)
# PREVIEW = Preview environment (pre-production)
# ############################################################################

# ============================================================================
# RND ENVIRONMENT (commented out - uncomment to use RND)
# ============================================================================
# --- Azure App Config / Key Vault ---
# AzureAppConfiguration__Label=rnd
# envSecretsKeyVault=ppt-kv-rnd
# --- Service Bus (DO NOT USE - causes race conditions with deployed services) ---
# AzureServiceBus__Namespace=ppt-sb-rnd-public.servicebus.windows.net
# AzureServiceBus__UseManagedIdentity=true
# --- Auth0 (QA Environment) ---
# Auth0__Domain=prescriberpoint-qa.us.auth0.com
# Auth0__M2MClientID=<your-qa-m2m-client-id>
# Auth0__M2MClientSecret=<your-qa-m2m-client-secret>
# Auth0__ClientID=<your-qa-client-id>
# Auth0__ClientSecret=<your-qa-client-secret>

# ============================================================================
# PREVIEW ENVIRONMENT (active)
# ============================================================================
# --- Azure App Config / Key Vault ---
AzureAppConfiguration__Label=preview
envSecretsKeyVault=ppt-kv-preview
# --- Service Bus (Local Emulator - runs in docker-compose) ---
# DO NOT use ppt-sb-rnd-public - it causes race conditions with deployed services
AzureServiceBus__Namespace=servicebus-emulator
# --- Auth0 (DEV Environment) ---
Auth0__Domain=prescriber-point-develop.us.auth0.com
Auth0__M2MClientID=
Auth0__M2MClientSecret=
Auth0__ClientID=
Auth0__ClientSecret=

# ----------------------------------------------------------------------------
# Container Configuration
# ----------------------------------------------------------------------------
CONTAINER_USERNAME=vscode

# ----------------------------------------------------------------------------
# ASP.NET Core Configuration
# ----------------------------------------------------------------------------
ASPNETCORE_ENVIRONMENT=Development
ASPNETCORE_URLS=http://+:5000

# ----------------------------------------------------------------------------
# SQL Server Configuration
# ----------------------------------------------------------------------------
ACCEPT_EULA=Y
MSSQL_SA_PASSWORD=YourStrong!Passw0rd
MSSQL_PID=Developer
DEVELOPMENT_SQL_PASSWORD=YourStrong!Passw0rd
SA_PASSWORD=YourStrong!Passw0rd

# ----------------------------------------------------------------------------
# NuGet / GitHub Packages Configuration
# ----------------------------------------------------------------------------
# Get your GitHub Personal Access Token from: https://github.com/settings/tokens
# Required scopes: read:packages, repo (for MCP server)
NUGET_AUTH_TOKEN=
GITHUB_TOKEN=
GITHUB_ACTOR=

# ----------------------------------------------------------------------------
# Atlassian / Jira Configuration (for MCP server)
# ----------------------------------------------------------------------------
# Uses OAuth via Atlassian's hosted MCP service (https://mcp.atlassian.com/v1/sse)
# You'll be prompted to login via browser on first use
ATLASSIAN_SITE_NAME=prescriberpoint

# ----------------------------------------------------------------------------
# Azure CLI Default Subscription/Tenant (PPT Production)
# ----------------------------------------------------------------------------
# These ensure Azure CLI and SDKs use the correct subscription/tenant
AZURE_DEFAULTS_SUBSCRIPTION=0a22775a-a836-472c-b56e-2222ab21fb65
AZURE_DEFAULTS_TENANT=befabd28-9d3c-422c-9be0-bb806deaf1fb
AZURE_SUBSCRIPTION_ID=0a22775a-a836-472c-b56e-2222ab21fb65
AZURE_TENANT_ID=befabd28-9d3c-422c-9be0-bb806deaf1fb

# ----------------------------------------------------------------------------
# Azure App Configuration
# ----------------------------------------------------------------------------
AzureAppConfiguration__Enabled=false
AzureAppConfiguration__ConnectionString=
AzureAppConfiguration__Endpoint=https://ppt-appconfig.azconfig.io
AzureAppConfiguration__CacheExpirationSeconds=86400
AzureAppConfiguration__KeyVaultSecretRefreshSeconds=86400
AzureAppConfiguration__SentinelKey=Sentinel__MicroserviceCaseManagementKey

# ----------------------------------------------------------------------------
# Azure Document Intelligence (Form Recognizer)
# ----------------------------------------------------------------------------
AzureDocumentIntelligence__Endpoint=
AzureDocumentIntelligence__ApiKey=

# ----------------------------------------------------------------------------
# Auth0 Configuration (Common)
# ----------------------------------------------------------------------------
Auth0__Audience=practice-portal-api
Auth0__Issuer=https://your-tenant.auth0.com/
Auth0__RolesClaimNamespace=https://your-namespace/roles
Auth0__EmailClaimNamespace=https://your-namespace/email
Auth0__PhoneClaimNamespace=https://your-namespace/phone

# ----------------------------------------------------------------------------
# Auth0 Configuration (Non-environment-specific settings)
# ----------------------------------------------------------------------------
# Note: Auth0__Domain, M2MClientID/Secret, ClientID/Secret are in ENVIRONMENT SELECTION section above
Auth0__UseProfileToken=false

# Auth0 Role IDs
Auth0__HCPRoleID=
Auth0__RepRoleID=
Auth0__PatientRoleID=
Auth0__PPTRoleId=
Auth0__ClinicalStaffRoleId=
Auth0__SamplesAdminRoleId=
Auth0__CaseManagementAdminRoleId=

# Legacy Auth0 (for backward compatibility)
AUTH0_CLIENT_ID=
AUTH0_CLIENT_SECRET=
AUTH0_CASE_MANAGEMENT_ADMIN_ROLE_ID=

# ----------------------------------------------------------------------------
# Azure Storage Configuration (Azurite emulator)
# ----------------------------------------------------------------------------
# Uses Azurite container for local blob/queue/table storage
# Uses 'azurite' hostname for Docker network access
AzureStorage__ConnectionString=DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://azurite:10000/devstoreaccount1;QueueEndpoint=http://azurite:10001/devstoreaccount1;TableEndpoint=http://azurite:10002/devstoreaccount1;
AzureStorage__ConnectionStringProtected=DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://azurite:10000/devstoreaccount1;QueueEndpoint=http://azurite:10001/devstoreaccount1;TableEndpoint=http://azurite:10002/devstoreaccount1;
AzureStorage__ProtectedUseAzureIdentity=false
AzureStorage__ProtectedBlobServiceUri=http://azurite:10000/devstoreaccount1
AZURE_STORAGE_BLOB_FOLDER=Development

# Azure Storage Queue Configuration
AzureStorage__QueueMaxRetries=3
AzureStorage__QueueRetryDelayInSeconds=2
AzureStorage__QueueRetryMaxDelayInSeconds=30

# Container names
AzureStorage__EpaMessagesContainerName=epa-messages
AzureStorage__EpaAttachmentsContainerName=epa-attachments
AzureStorage__EpaAiAnswersContainerName=epa-ai-answers
AzureStorage__CaseManagementEligibilityContainerName=eligibility
AzureStorage__CaseManagementRTBCContainerName=rtbc
AzureStorage__CaseManagementCoverageContainerName=coverageresults

# Common storage (uses same Azurite instance for local dev)
AzureStorage__ConnectionStringCommon=DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://azurite:10000/devstoreaccount1;QueueEndpoint=http://azurite:10001/devstoreaccount1;TableEndpoint=http://azurite:10002/devstoreaccount1;
AzureStorage__BlobServiceCommonUri=http://azurite:10000/devstoreaccount1

# ----------------------------------------------------------------------------
# Azure Service Bus (Topic/Subscription Configuration)
# ----------------------------------------------------------------------------
AzureServiceBus__EpaResponseTopic=epa_response_received
AzureServiceBus__EpaResponseSubscription=epa-response-received-subscription
AzureServiceBus__RtbcRequestedTopic=rtbc_requested
AzureServiceBus__CmNotificationsTopic=cm_notifications
AzureServiceBus__ProcessRtbcRequestSubscription=cm-process-rtbc-request

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
REDIS__Host=ppt-redis
REDIS__Port=6379
REDIS__Password=
REDIS__UseRedis=false
REDIS__UseSsl=false
REDIS__AbortConnect=false
DEVELOPMENT_REDIS_PASSWORD=
DEVELOPMENT_ADMIN_UI_PASSWORD=

# ----------------------------------------------------------------------------
# CosmosDB Configuration
# ----------------------------------------------------------------------------
CosmosDb__DatabasePubMed=splLoader
CosmosDb__ContainerDailymed=dailymed
Cosmos__Url=
Cosmos__Db=ppt-ai
Cosmos__Container=chatlog
Cosmos__DrugLabelContainer=drug-labels
Cosmos__Key=

# ----------------------------------------------------------------------------
# Entity Framework / Database Connection Strings
# ----------------------------------------------------------------------------
# ePA Database
EntityFramework__EpaDbConnectionString=Server=sqlserver;Database=EpaDb;User Id=sa;Password=YourStrong!Passw0rd;TrustServerCertificate=true;

# Case Management Database
EntityFramework__CaseManagementConnectionString=Server=sqlserver;Database=CaseManagementDb;User Id=sa;Password=YourStrong!Passw0rd;TrustServerCertificate=true;

# Agentic Database
ConnectionStrings__DefaultConnection=Server=sqlserver,1433;Database=PPTAgentic;User Id=sa;Password=YourStrong!Passw0rd;TrustServerCertificate=true;

# SAM Gateway Database
DATABASE_CONNECTION_STRING=Server=sqlserver;Database=SamGatewayDb;User Id=sa;Password=YourStrong!Passw0rd;TrustServerCertificate=true;

# ----------------------------------------------------------------------------
# Semantic Kernel / Azure OpenAI Configuration
# ----------------------------------------------------------------------------
SemanticKernel__AzureOpenAI__Endpoint=
SemanticKernel__AzureOpenAI__ApiKey=
SemanticKernel__AzureOpenAI__ChatDeployment=
SemanticKernel__EnableLiveTesting=true

# ----------------------------------------------------------------------------
# AI / Azure OpenAI Configuration (Med AI Services)
# ----------------------------------------------------------------------------
AI__AZURE_KEY1=
AI__AZURE_ENDPOINT=
AI__AZURE_GPT=
AI__AZURE_EMBEDDING=
AI__AZURE_COMPLETIONS=
AI__AZURE_COMPLETIONS2=
AI__AZURE_API_VERSION=2024-05-01-preview
AI__GPT_TOKENS=4096
AI__COMPLETIONS_TOKENS=4096
AI__RXNAV_URL=https://rxnav.nlm.nih.gov/REST/

# AI Search Configuration
AI__SEARCH_ENDPOINT=
AI__SEARCH_API_KEY=
AI__SEARCH_INDEX_NAME=

# ----------------------------------------------------------------------------
# PA (Prior Authorization) Knowledge Base Configuration
# ----------------------------------------------------------------------------
# Used by FRM Agent for manufacturer-specific PA optimization
# See: AA-90 (Azure App Config), AA-85 (Index Setup), AA-89 (Embedding Upgrade)
PA__KnowledgeBase__SearchEndpoint=https://ppt-ai-search.search.windows.net
PA__KnowledgeBase__SearchApiKey=
PA__KnowledgeBase__IndexName=pa-knowledge-base
PA__KnowledgeBase__EmbeddingDeployment=ppt-ai-rnd-chatbot-text-embedding-ada-002
PA__KnowledgeBase__EmbeddingDimensions=1536

# ----------------------------------------------------------------------------
# PA Document Extraction Configuration (AA-86)
# ----------------------------------------------------------------------------
# Hybrid document parsing: Azure Document Intelligence + LLM Vision fallback
# Uses prebuilt-layout model for semantic chunking support (paragraphs, tables)
PA__DocumentExtraction__ContainerName=pa-documents
PA__DocumentExtraction__DocumentIntelligenceEndpoint=https://ppt-document-intelligence.cognitiveservices.azure.com/
PA__DocumentExtraction__DocumentIntelligenceKey=
PA__DocumentExtraction__UseAzureIdentity=false
PA__DocumentExtraction__StructuredExtractionModel=prebuilt-layout
PA__DocumentExtraction__MinStructuredConfidence=0.85
PA__DocumentExtraction__CompressContent=true

AI__Cog_Service_Name=
AI__Cog_Service_Key=
AI__Cog_Service_Index=
AI__Cog_Service_Labels_Index=
AI__Cog_Service_Resource_Index=
AI__Cog_Service_Version=2023-07-01-Preview
AI__Cog_Service_Resource_Config=resources
AI__Cog_Service_Exhaustive=true
AI__Loader_Cog=true
AI__UseCogSvcs=true

# AI Feature Flags
AI__AllowChatHistory=true
AI__UseLocalFileTemplates=true
AI__UseDynamicErrorMessage=false

# AI URLs
AI__Labels=
AI__LABELS_Service=
AI__ToolTemplatesCdnUrl=
AI__DrugLabelUrl=
AI__DrugbankDdiUrl=
AI__EnhancedContentUrl=

# AI Storage
AI__STORAGE_CONTAINER_NAME=
AI__STORAGE_CONNECTION_STRING=

# AI Database
AI__AZURE_DB_USE_MANAGED_IDENTITY=False
AI__AZURE_DB_CONN_STRING=

# AI Slack (leave empty for local dev)
AI__SlackWebhook=
AI__SlackWebhookErrorChannel=

# OpenAI API Key (for non-Azure OpenAI usage)
OPENAI_API_KEY=

# ----------------------------------------------------------------------------
# Algolia Configuration
# ----------------------------------------------------------------------------
Algolia__Url=
Algolia__Id=
Algolia__Api_Key=
Algolia__IndexName=

# ----------------------------------------------------------------------------
# External Services Integration
# ----------------------------------------------------------------------------
# Truepill
Truepill__ApiUrl=https://api.falsepill.com/
Truepill__ApiToken=
Truepill__WebhooksApiToken=
Truepill__IsMockMode=true

# CenterX
CenterX__EpaApiUrl=
CenterX__EpaUserName=
CenterX__EpaPassword=
CenterX__ApiUsername=
CenterX__ApiPassword=
CenterX__RtbxApiUrl=
CenterX__TestingActivated=true
CenterX__UseMock=true
CenterX__UseHybridMock=true

# MMIT
MMIT__BASEURL=https://api.mmitnetwork.com/
MMIT__Username=
MMIT__Password=

# Microservice URLs (for local docker network)
MicroserviceEpa__BaseUrl=http://microservice-epa:5000
MicroserviceCaseManagement__ApiUrl=http://microservice-case-management:5000
MicroserviceAgenticGateway__ApiUrl=http://ppt-agentic:5000
MicroserviceEpa__TestPrescriptionId=

# Microservice Profile
MicroserviceProfile__ApiUrl=https://microservice-profile.rnd.ontherapy.dev/
MicroserviceProfile__User=
MicroserviceProfile__Password=

# Microservice Samples
MicroserviceSamples__ApiUrl=https://microservice-samples.rnd.ontherapy.dev/

# ----------------------------------------------------------------------------
# SendGrid Email Configuration
# ----------------------------------------------------------------------------
SendGrid__ApiKey=
EmailData__ShareChatLink=

# ----------------------------------------------------------------------------
# Contentful Configuration
# ----------------------------------------------------------------------------
Contentful__BaseUrl=
Contentful__Token=

# ----------------------------------------------------------------------------
# Split.io Feature Flags
# ----------------------------------------------------------------------------
Splitio__SdkKey=
Splitio__ContextKey=
Splitio__FeaturesRefreshRate=15

# ----------------------------------------------------------------------------
# BrainTrust Configuration
# ----------------------------------------------------------------------------
BRAINTRUST_API_KEY=

# ----------------------------------------------------------------------------
# Semantic Scholar API
# ----------------------------------------------------------------------------
S2_API_KEY=

# ----------------------------------------------------------------------------
# SonarQube (MCP Server for PR analysis)
# ----------------------------------------------------------------------------
# Get your token from: https://sonarqube.rnd.ontherapy.dev/account/security
SONAR_TOKEN=
SONARQUBE_URL=https://sonarqube.rnd.ontherapy.dev

# ----------------------------------------------------------------------------
# Application Insights
# ----------------------------------------------------------------------------
APPLICATIONINSIGHTS_CONNECTION_STRING=
APP_INSIGHTS_KEY=development-key

# ----------------------------------------------------------------------------
# Security Settings
# ----------------------------------------------------------------------------
SECURITY__REQUIREHTTPS=false
SECURITY__REQUIREAUTHENTICATIONGLOBALLY=false
SECURITY_REQUIRE_HTTPS=false
SECURITY_ENABLE_API_KEYS=true
SECURITY_ENABLE_RATE_LIMITING=true
SECURITY_RATE_LIMIT_PER_MINUTE=60

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
FEATUREMANAGEMENT__ENABLEADVANCEDAGENTS=true
FEATUREMANAGEMENT__ENABLEWORKFLOWDEBUG=true

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
SERILOG__MINIMUMLEVEL__DEFAULT=Debug
LOGGING__LOGLEVEL__DEFAULT=Information
LOGGING__LOGLEVEL__MICROSOFT=Warning
LOGGING__LOGLEVEL__MICROSOFT_ASPNETCORE=Warning
Logging__LogLevel__Default=Information
Logging__LogLevel__PPT.Agentic=Information
Logging__LogLevel__PPT.Agents=Information

# ----------------------------------------------------------------------------
# .NET Development Settings
# ----------------------------------------------------------------------------
DOTNET_USE_POLLING_FILE_WATCHER=true
DOTNET_RUNNING_IN_CONTAINER=true
DOTNET_CLI_TELEMETRY_OPTOUT=1
DOTNET_SKIP_FIRST_TIME_EXPERIENCE=1

# ----------------------------------------------------------------------------
# Node.js Configuration
# ----------------------------------------------------------------------------
NODE_OPTIONS=--no-deprecation

# ----------------------------------------------------------------------------
# Console App Configuration (ppt-agentic)
# ----------------------------------------------------------------------------
ConsoleApp__DefaultMode=interactive
ConsoleApp__ShowTimings=true
ConsoleApp__ShowDetailedLogs=true

# ----------------------------------------------------------------------------
# Diagnostic Info
# ----------------------------------------------------------------------------
Diag__SHA=
Diag__DeployDate=

# ----------------------------------------------------------------------------
# Chromium/Pyppeteer (for web scraping tasks)
# ----------------------------------------------------------------------------
PYPPETEER_CHROMIUM_REVISION=1352074

# ----------------------------------------------------------------------------
# Azure Identity / Workload Identity
# ----------------------------------------------------------------------------
workloadIdentityClientId=
serviceAccountName=

# ----------------------------------------------------------------------------
# Claude Code Configuration (Optional)
# ----------------------------------------------------------------------------
# For multi-client scenarios requiring separate billing
# Get API keys from: https://console.anthropic.com/settings/keys
# Leave commented to use your Claude.ai subscription (Pro, Max, Team, or Enterprise)
# ANTHROPIC_API_KEY=

# ----------------------------------------------------------------------------
# HHS NPI Registry Configuration (for Case Management)
# ----------------------------------------------------------------------------
HHS__Url=https://npiregistry.cms.hhs.gov/api/
HHS__Version=2.1
